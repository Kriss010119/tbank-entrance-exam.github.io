(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();class c{constructor(){this.editBtn=document.querySelector(".edit-btn"),this.isEditMode=!1,this.editableSelectors=["h1","h2","h3","h4","h5","p","li","span",".interest-tag",".experience-company",".experience-date .date",".year",".contact-value"],this.maxLengths={h1:30,h2:40,h3:50,h4:60,h5:50,p:200,li:150,span:30,".interest-tag":50,".experience-company":50,".experience-date .date":20,".year":10,".skill-tags":100,".contact-value":40},this.init(),this.originalContents=new Map}init(){this.loadFromLocalStorage(),this.setupEventListeners(),this.applyMaxLengths()}setupEventListeners(){this.editBtn.addEventListener("click",()=>this.toggleEditMode()),document.querySelectorAll(".contact-value").forEach(t=>{t.addEventListener("blur",e=>this.updateContactLink(e.target))})}toggleEditMode(){this.isEditMode=!this.isEditMode,this.isEditMode?this.enableEditing():this.disableEditing()}enableEditing(){this.editBtn.textContent="Сохранить",document.body.classList.add("edit-mode"),this.editableSelectors.forEach(t=>{document.querySelectorAll(t).forEach(e=>{e.contentEditable=!0,e.style.outline="1px dashed #28D979FF"})})}disableEditing(){this.editBtn.textContent="Редактировать",document.body.classList.remove("edit-mode"),this.editableSelectors.forEach(t=>{document.querySelectorAll(t).forEach(e=>{e.contentEditable=!1,e.style.outline="none"})}),this.applyMaxLengths(),this.saveToLocalStorage(),this.updateContactLinks()}updateContactLinks(){document.querySelectorAll(".contact-value").forEach(t=>{this.updateContactLink(t)})}updateContactLink(t){const e=t.textContent.trim(),i=t.closest("a");if(i)if(t.textContent.includes("@"))i.href=`mailto:${e}`;else{const n=e.replace(/\D/g,"");i.href=`tel:${n}`}}loadFromLocalStorage(){this.editableSelectors.forEach(t=>{document.querySelectorAll(t).forEach((e,i)=>{const n=this.getParentIdentifier(e),o=`${t}-${n}-${i}`,r=localStorage.getItem(o);r&&(e.innerHTML=r,t===".contact-value"&&this.updateContactLink(e))})})}saveToLocalStorage(){this.editableSelectors.forEach(t=>{document.querySelectorAll(t).forEach((e,i)=>{const n=this.getParentIdentifier(e),o=`${t}-${n}-${i}`;localStorage.setItem(o,e.innerHTML)})})}getParentIdentifier(t){let e=t.parentNode,i="";for(;e&&e!==document;)e.id?i=e.id+"-"+i:e.className&&typeof e.className=="string"&&(i=e.className.split(" ")[0]+"-"+i),e=e.parentNode;return i||"root"}truncateText(t,e){return t.length>e?t.substring(0,e)+"...":t}applyMaxLengths(){for(const[t,e]of Object.entries(this.maxLengths))document.querySelectorAll(t).forEach(i=>{i.textContent.length>e&&(i.textContent=this.truncateText(i.textContent,e))})}}document.addEventListener("DOMContentLoaded",()=>{new c});const a=document.querySelectorAll(".ripple");a.forEach(s=>{s.addEventListener("click",function(t){if(document.body.classList.contains("edit-mode"))return;const e=this.getBoundingClientRect(),i=t.clientX-e.left,n=t.clientY-e.top,o=document.createElement("span");o.classList.add("circle"),o.style.top=n+"px",o.style.left=i+"px",this.appendChild(o),setTimeout(()=>o.remove(),500)})});document.addEventListener("DOMContentLoaded",()=>{const s=document.querySelector(".pdf-btn"),t=document.querySelector(".edit-btn"),e=document.querySelector(".resume"),i=document.createElement("style");i.innerHTML="@media print { .pdf-btn, .edit-btn { display: none !important; } }",document.head.appendChild(i),s.addEventListener("click",n=>{n.preventDefault(),s.style.display="none",t.style.display="none",window.print()},!1),e.addEventListener("click",n=>{s.style.display="flex",t.style.display="flex"},!1)},!1);
